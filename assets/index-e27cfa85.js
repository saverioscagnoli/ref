var p=Object.defineProperty;var y=(t,e,i)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var h=(t,e,i)=>(y(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const c=class{constructor({x:e,y:i,img:n}){h(this,"x");h(this,"y");h(this,"img");this.x=e,this.y=i,this.img=n}collides(e,i){return e>=this.x&&e<=this.x+this.img.width&&i>=this.y&&i<=this.y+this.img.height}drawBorder(e){e.strokeStyle="#ab20fd",e.lineWidth=2,e.strokeRect(this.x-c.OFFSET,this.y-c.OFFSET,this.img.width+c.OFFSET*2,this.img.height+c.OFFSET*2)}draw(e){e.drawImage(this.img,this.x,this.y,this.img.width,this.img.height),this.drawBorder(e)}};let a=c;h(a,"OFFSET",5);document.querySelector("#app").innerHTML=`
  <canvas></canvas>
`;let l=null;const d=[];let[f,u]=[0,0];const o=document.querySelector("canvas"),m=o.getContext("2d");o.width=window.innerWidth;o.height=window.innerHeight;document.addEventListener("resize",()=>{o.width=window.innerWidth,o.height=window.innerHeight});o.addEventListener("mousemove",t=>{[f,u]=[t.clientX,t.clientY],l&&(l.x=f-l.img.width*.5,l.y=u-l.img.height*.5)});o.addEventListener("mousedown",t=>{for(let e=0;e<d.length;e++){const i=d[e];if(i.collides(t.clientX,t.clientY)){l=i;break}}});o.addEventListener("mouseup",()=>{l&&(l=null)});o.addEventListener("wheel",t=>{for(let e=0;e<d.length;e++){const i=d[e];if(i.collides(t.clientX,t.clientY)){let n=1+t.deltaY*.001,[r,s]=[i.img.width*n,i.img.height*n];i.img.width=r,i.img.height=s;break}}});o.addEventListener("dragover",t=>t.preventDefault());o.addEventListener("drop",t=>{t.preventDefault();const e=t.dataTransfer.files[0],i=new FileReader;i.onload=()=>{const n=new Image;console.log(n.width,n.height),n.onload=()=>{let[r,s]=[t.clientX-n.width*.5,t.clientY-n.height*.5];d.push(new a({x:r,y:s,img:n}))},n.src=i.result},i.readAsDataURL(e)});document.addEventListener("keydown",t=>{if(["Delete","Backspace"].includes(t.key)){console.log("delete");for(let e=0;e<d.length;e++)if(d[e].collides(f,u)){d.splice(e,1);break}}});const w=()=>{requestAnimationFrame(w),m.clearRect(0,0,o.width,o.height);for(let t=0;t<d.length;t++)d[t].draw(m)};w();
